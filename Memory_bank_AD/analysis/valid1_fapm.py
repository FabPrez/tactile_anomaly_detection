import matplotlib.pyplot as plt
import numpy as np

# ===========================
# DATI PER TUTTI I PEZZI
# ===========================

good_fractions = np.array([
    0.05, 0.10, 0.15, 0.20, 0.25,
    0.30, 0.35, 0.40, 0.45, 0.50,
    0.55, 0.60, 0.65, 0.70, 0.75,
    0.80, 0.85, 0.90, 0.95, 1.00
])

results = {

    "PZ1": {
        "image": [
            0.9552631578947368, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9459418336143846, 0.9556230742080342, 0.9572426591064233,
            0.9584412796028038, 0.9581748153020747, 0.9578439942996688,
            0.957620381559504, 0.9578234523415341, 0.9581880869255396,
            0.95809489594396, 0.9578924728413555, 0.9578918549373958,
            0.9579250324587907, 0.9581923439345669, 0.9580684609555807,
            0.9583247719291281, 0.9581342463655814, 0.9578683013994114,
            0.9582152901888309, 0.9582683876811853
        ],
        "px_auprc": [
            0.24595659476146536, 0.2511776092454834, 0.25314752322572653,
            0.2517879198747878, 0.25349528653474107, 0.25372443022531466,
            0.2514902049692362, 0.2508088315704273, 0.2513884940901535,
            0.25210651491135616, 0.251503400491267, 0.25104544457204736,
            0.25101799629490956, 0.2509309881035764, 0.2511721767361612,
            0.25180123385326286, 0.2509805241022012, 0.2515794838588196,
            0.25209392735130653, 0.25222066844562263
        ],
        "px_aucpro": [
            0.06654135967098812, 0.06496616075860331, 0.06576464748893572,
            0.06449156137655737, 0.06473073915608359, 0.06494060836508138,
            0.06367169054877397, 0.06372694053420806, 0.06383246754455059,
            0.06392176944830591, 0.06380236709750173, 0.06348797209205466,
            0.06375660044276998, 0.06358308001409427, 0.06373654625063427,
            0.06408354453714254, 0.0638509381589041, 0.06398448426291126,
            0.06399576196208387, 0.06422357888153213
        ],
    },

    "PZ2": {
        "image": [
            0.9470588235294117, 0.9470588235294117, 0.976470588235294, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9876748049816849, 0.9875342584232701, 0.9873476500907302,
            0.9876349378487138, 0.9879836772203523, 0.9880653701167199,
            0.9878454056954005, 0.9880586763693023, 0.987954739985637,
            0.9881663862611272, 0.9881329810988775, 0.9881354021968445,
            0.9881725531255062, 0.9881669385741009, 0.9881540254561432,
            0.988176544889763, 0.9881283146357053, 0.988111549723217,
            0.9881364664711592, 0.9881139131309591
        ],
        "px_auprc": [
            0.19549628742934227, 0.19239006033984363, 0.19968424417205238,
            0.1900793844696434, 0.19486469857199637, 0.19160892611127944,
            0.19194243774371467, 0.19385479083518303, 0.19364389457117803,
            0.19454591920516934, 0.19380870480065204, 0.1938965695262358,
            0.19458147974521672, 0.1941956215957374, 0.19504485788270765,
            0.1961797699785383, 0.19524815720736505, 0.1952905785682841,
            0.19422072472385044, 0.19397064468299394
        ],
        "px_aucpro": [
            0.2461345744244099, 0.24667592769198743, 0.2530989891572038,
            0.24341125119281365, 0.2482077617135245, 0.24624371866735675,
            0.2450232101446227, 0.24430577685056992, 0.2440215580471748,
            0.24541022453531625, 0.2455312939515317, 0.24694092213442545,
            0.2457531060770421, 0.24409189015946595, 0.24543113877490536,
            0.24509413728179535, 0.2465492809780675, 0.2458184872706499,
            0.2459155082465228, 0.24475913883077274
        ],
    },

    "PZ3": {
        "image": [
            0.9958333333333333, 0.9874999999999999, 0.9958333333333333,
            0.8583333333333333, 0.8541666666666666, 0.9916666666666667,
            0.9624999999999999, 0.9958333333333333, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9691246924905926, 0.9673928957630596, 0.9694440393152872,
            0.9697908037851315, 0.9694773769462728, 0.9691161623573343,
            0.9693370107158227, 0.9710701476642791, 0.9711983990108878,
            0.9708770330710171, 0.9709871441424582, 0.9708032461676375,
            0.9712326401553694, 0.9712054144282175, 0.9712064867977418,
            0.9709759719557725, 0.9709958588196675, 0.9708464436941895,
            0.9709005698952018, 0.9714115321164654
        ],
        "px_auprc": [
            0.2551959397077054, 0.25049858707283784, 0.25298834276489723,
            0.251506004966367, 0.2527898491056184, 0.2554617447167211,
            0.25131416500303266, 0.25167437275714305, 0.25288864155394286,
            0.24988423151554787, 0.2504226272595715, 0.251656737158216,
            0.25090484690395853, 0.2517325603391506, 0.251840556004588,
            0.2490799313808752, 0.25368990057838375, 0.25227340921339203,
            0.2532760045585839, 0.25428314029915877
        ],
        "px_aucpro": [
            0.23905632287409528, 0.22549453831436092, 0.24085316225367104,
            0.21016411295230655, 0.2120111689543461, 0.2161156345303901,
            0.20349812906450818, 0.2062987009507453, 0.2056531540569935,
            0.2025537125606674, 0.205290524042962, 0.20510225632855944,
            0.20639125929406624, 0.20478547196952926, 0.20664474986617706,
            0.2082099033155294, 0.21370758960531328, 0.2113625613217648,
            0.2141729689006719, 0.21054475225086194
        ],
    },

    "PZ4": {
        "image": [
            0.8666666666666667, 0.8238095238095239, 0.9309523809523809,
            0.9214285714285714, 0.9380952380952381, 0.9738095238095239,
            0.9619047619047618, 0.9952380952380953, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9371987067007223, 0.9534424982371995, 0.9654575432310383,
            0.970624385894994, 0.9767434021677415, 0.9762732732240413,
            0.9775839956342056, 0.977500746447319, 0.9776028249309003,
            0.9788007724015019, 0.9784765276458858, 0.9787159389982523,
            0.9788590586184802, 0.9801117886537342, 0.978623360101741,
            0.9787777273557928, 0.9791338514561829, 0.9792686578318973,
            0.9798234369194933, 0.978245925956435
        ],
        "px_auprc": [
            0.10661431633135993, 0.1568526946324217, 0.16635862276632862,
            0.19542316130679638, 0.17258991160162662, 0.15162327303661483,
            0.15466450307910992, 0.15310970926188633, 0.15639813672385788,
            0.15459961263939087, 0.15832483830246327, 0.15508373372547377,
            0.15703571815783565, 0.16138385818308248, 0.1563591579251631,
            0.15729257204029196, 0.16062342576150504, 0.15569089023011917,
            0.15735003530199168, 0.1576929508931863
        ],
        "px_aucpro": [
            0.11423061722244253, 0.1989151220773653, 0.25465726541209116,
            0.32397574303819654, 0.30951949219835256, 0.2697735607328019,
            0.2580724572917247, 0.262687567358881, 0.26806428920589803,
            0.2576870882935318, 0.27509408010290104, 0.2554847455796351,
            0.26390296108602335, 0.2739194281491655, 0.2668905485244346,
            0.2644559249458161, 0.2650445727690106, 0.2654710946646847,
            0.2742223070542129, 0.2633319522794662
        ],
    },

    "PZ5": {
        "image": [
            0.7714285714285714, 0.9214285714285715, 0.9333333333333332,
            0.9952380952380953, 0.9880952380952381, 0.9666666666666667,
            0.9833333333333334, 0.9928571428571429, 1.0, 0.9952380952380953,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9426302626046984, 0.9727765960241308, 0.9818688002905325,
            0.9822616870841158, 0.985867014376579, 0.985446147375055,
            0.9852555654331858, 0.985879440954117, 0.9862014265409218,
            0.9857798013190704, 0.9859481135826801, 0.9859783455495266,
            0.9858738016939144, 0.9861384662808931, 0.9860661679917271,
            0.986031831983921, 0.9860094896431124, 0.9859364686847741,
            0.9857403243244628, 0.985977893526061
        ],
        "px_auprc": [
            0.030012308723632763, 0.0746378333236338, 0.07566585011271587,
            0.08801815553174926, 0.08556388638604483, 0.08496754264746201,
            0.08895470629298939, 0.08719735759704648, 0.08688924325984985,
            0.0888216019563163, 0.08778660013053173, 0.08653816487552735,
            0.08656412543889959, 0.08875157049995382, 0.08857051887234078,
            0.08722235840118378, 0.08869884409836995, 0.08968712991548218,
            0.08822970627634946, 0.08892662821523026
        ],
        "px_aucpro": [
            0.10777092658015804, 0.24690530947100583, 0.2232114967847964,
            0.2536826079749421, 0.2448716350979185, 0.2415575841094984,
            0.24771124987491427, 0.2483563469700513, 0.24440062759241418,
            0.24874967470721404, 0.24469896613200334, 0.2451539403949736,
            0.24479397645201115, 0.24960687262609751, 0.24837951056157662,
            0.24619304680495085, 0.24855506943701655, 0.2513555705332111,
            0.24841882901834983, 0.24953456264650534
        ],
    },

}


# =================================================
# FUNZIONE PER PLOTTARE TUTTI I GRAFICI PER UN PEZZO
# =================================================

def plot_piece(piece_name, data):
    print(f"Plotting {piece_name} ...")

    # ----- IMAGE-LEVEL AUROC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["image"], marker="o")
    plt.title(f"{piece_name} – Image-level AUROC")
    plt.xlabel("Good Fraction")
    plt.ylabel("AUROC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUROC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_auroc"], marker="o", color="green")
    plt.title(f"{piece_name} – Pixel-level AUROC")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUROC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUPRC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_auprc"], marker="o", color="orange")
    plt.title(f"{piece_name} – Pixel-level AUPRC")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUPRC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUC-PRO -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_aucpro"], marker="o", color="red")
    plt.title(f"{piece_name} – Pixel-level AUC-PRO")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUC-PRO")
    plt.grid(True)
    plt.tight_layout()
    plt.show()


# =================================================
# ESEGUI LA PLOTTATURA PER TUTTI I PEZZI
# =================================================

for piece, data in results.items():
    plot_piece(piece, data)
