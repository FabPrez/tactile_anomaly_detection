import matplotlib.pyplot as plt
import numpy as np

# ===========================
# DATI PER TUTTI I PEZZI
# ===========================

good_fractions = np.array([
    0.05, 0.10, 0.15, 0.20, 0.25,
    0.30, 0.35, 0.40, 0.45, 0.50,
    0.55, 0.60, 0.65, 0.70, 0.75,
    0.80, 0.85, 0.90, 0.95, 1.00
])

results = {

    "PZ1": {
        "image": [
            0.9973684210526316, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9701694381004493, 0.9716816596035106, 0.9718576866780115,
            0.9726441870071436, 0.9722152671340852, 0.9717557400703545,
            0.972024914045167, 0.9719676068256734, 0.9712494341881935,
            0.9709103733735872, 0.9706892928864642, 0.9705542391031629,
            0.970139913020039, 0.9702603770287294, 0.9707044926313767,
            0.97070451358089, 0.9705828855454603, 0.9705438547978965,
            0.9705290355097268, 0.9706269510527389
        ],
        "px_auprc": [
            0.37628477313527753, 0.3852055454593263, 0.3853545523194072,
            0.3868135213187536, 0.38386700648722105, 0.38245887423353697,
            0.38410476101972113, 0.38455286625916985, 0.38145339209006235,
            0.3798342916790881, 0.38009749968246653, 0.3809921963942688,
            0.38084523969256384, 0.3824127435944609, 0.38354238163579607,
            0.38354255892662903, 0.3830179406012082, 0.382788936426361,
            0.3827369522466937, 0.38273705759049115
        ],
        "px_aucpro": [
            0.11087252197424977, 0.11340548111337394, 0.11331733593755804,
            0.11203542493915582, 0.11256802579809218, 0.11360873362921073,
            0.11365698603478008, 0.1142461796657192, 0.11128458577213331,
            0.11339030972747555, 0.11283217478628635, 0.11373409320384516,
            0.11719657656137168, 0.1179152265693238, 0.11824045900503673,
            0.11824046239662969, 0.11729034612581454, 0.11741818571534113,
            0.11728852307120295, 0.11720684605642769
        ],
    },

    "PZ2": {
        "image": [
            0.9382352941176471, 0.9882352941176471, 0.9911764705882353, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9941831319879553, 0.993907825652547, 0.9939082533027941,
            0.9939726541584429, 0.9939797662738309, 0.9938944735354454,
            0.9938426252250913, 0.9938915264301265, 0.9939224808261512,
            0.9940111308063733, 0.99398291629322, 0.9939424769867059,
            0.9939421036990752, 0.9939229369537225, 0.994015595231162,
            0.994000969690788, 0.9939743929915632, 0.9939742183446526,
            0.9941405156548085, 0.9941085971279743
        ],
        "px_auprc": [
            0.3856878190204944, 0.3754095351229021, 0.3758384796670054,
            0.37456337192821726, 0.37379332085546974, 0.37341775771979047,
            0.3740601844500864, 0.37399601433003743, 0.37568527730210116,
            0.37733351785533875, 0.37830940978395855, 0.37793051824544716,
            0.37750235480600997, 0.37750418689669607, 0.38136986591298,
            0.3803182120041766, 0.3798027589454287, 0.3798016720894075,
            0.3829180062648343, 0.37932511759833815
        ],
        "px_aucpro": [
            0.425391068502503, 0.41889448542142554, 0.41774674090077407,
            0.4174590835855749, 0.42278052217214507, 0.41936511254737,
            0.417880352469389, 0.41874162961373407, 0.41700982081003224,
            0.4191804961253322, 0.41758562161773705, 0.4188010317876578,
            0.41806313296849423, 0.41855176615889794, 0.4216250865934617,
            0.42123867932258374, 0.4215912426157646, 0.4215890979983781,
            0.4240395570338973, 0.4196159174284243
        ],
    },

    "PZ3": {
        "image": [
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9810893002263956, 0.9810816387365504, 0.9810088537877792,
            0.9807050450673312, 0.9806046854977909, 0.9810163410236015,
            0.9807153765886047, 0.981104642147265, 0.9811942690088388,
            0.980624430712516, 0.980564688644845, 0.98065847967392,
            0.9816729559919898, 0.9816656013926139, 0.9817721352080094,
            0.9816489318782735, 0.9815562360156121, 0.9812607643537117,
            0.9811485023740848, 0.9810172623938574
        ],
        "px_auprc": [
            0.38487332107269334, 0.382444554990845, 0.38506570687029246,
            0.38583669401292353, 0.386378142893139, 0.39588307541538414,
            0.39485480788181615, 0.3955197647930717, 0.3964330041466208,
            0.3884068805697951, 0.390660177953064, 0.39210575831921035,
            0.3934205544964676, 0.3927946145546325, 0.39325337047050785,
            0.3913675591270267, 0.39174977987015414, 0.390708564958743,
            0.38890593742188234, 0.3869419769252004
        ],
        "px_aucpro": [
            0.3462070484772058, 0.34750291537696876, 0.3486170653876265,
            0.3460922846027137, 0.35235229704195453, 0.3449398262412489,
            0.3443667901883821, 0.34643670855443165, 0.35166779959315475,
            0.3489885749997678, 0.34843652353569626, 0.3423183186422362,
            0.3390298017458589, 0.3383755539099694, 0.33970328175425524,
            0.33887848186464653, 0.3393647384747982, 0.34358282057114153,
            0.3424948752548963, 0.34289089491441943
        ],
    },

    "PZ4": {
        "image": [
            0.8928571428571428, 0.9380952380952381, 0.9785714285714286,
            0.9857142857142857, 0.9952380952380953, 0.9952380952380953,
            1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0,
            1.0, 1.0
        ],
        "px_auroc": [
            0.990620963150021, 0.9921878094601267, 0.9929584849198381,
            0.9936232272345101, 0.9938716758542145, 0.9930358106246551,
            0.9929310604067064, 0.9932560824328234, 0.9930526402499288,
            0.992448762941131, 0.9925888955402759, 0.9925773846915964,
            0.992595924625523, 0.9924365146317281, 0.9924374787450225,
            0.9925943807788496, 0.992654116049319, 0.9923407012888099,
            0.9922447171725862, 0.9925389487157237
        ],
        "px_auprc": [
            0.18102345106087103, 0.21953012869050353, 0.2192760653149158,
            0.22309112957552235, 0.2179089572069204, 0.21667124795250656,
            0.21732004107851613, 0.2179428112674226, 0.21713695646789938,
            0.2157463506721987, 0.22053457313310393, 0.21564993292845383,
            0.21554798919475388, 0.21657675599647136, 0.21730378973140785,
            0.21848870353116487, 0.2180047376738357, 0.21750491342218145,
            0.21690238837970244, 0.21738845927173878
        ],
        "px_aucpro": [
            0.28457370813467237, 0.3808376578900595, 0.3802124249622595,
            0.3878235687340558, 0.389596958901286, 0.3887411959473446,
            0.39741161530825003, 0.39508906704221775, 0.39415663866573236,
            0.39322936276570486, 0.3891010134503179, 0.39177786452662683,
            0.3923019630427047, 0.3906383328282678, 0.3938142182784793,
            0.39496134318800563, 0.3931495702875401, 0.39380319902562333,
            0.39360559372661125, 0.3941083367977591
        ],
    },

    "PZ5": {
        "image": [
            0.8428571428571427, 0.9428571428571428, 0.9547619047619047,
            0.9880952380952381, 0.9952380952380953, 1.0,
            1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0,
            1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9936292488679656, 0.9936086558334506, 0.9937822703456849,
            0.9936595920018257, 0.9936314855817117, 0.9935685340144418,
            0.9938873820724927, 0.9938344697502489, 0.993799546535431,
            0.9936096680383635, 0.9934709257545723, 0.9935890202283225,
            0.9934489096151158, 0.9934632903917338, 0.9935182352593338,
            0.9933948782673252, 0.9936282344898631, 0.9936821905004094,
            0.992990043443729, 0.9927258905593495
        ],
        "px_auprc": [
            0.19188720431055095, 0.18987927049488765, 0.18454805134938806,
            0.1821921776797606, 0.18111868450184457, 0.17899636876735303,
            0.18460696554600306, 0.18342385642272369, 0.18380051310085188,
            0.17946137897350464, 0.17947540099779946, 0.18146989541898761,
            0.1784107478129718, 0.1787911695159459, 0.17946847884609166,
            0.1770007932284528, 0.17970486359992255, 0.17978292473569396,
            0.1689424584990004, 0.1665451061937673
        ],
        "px_aucpro": [
            0.43701092845919, 0.43947871371250063, 0.4345595159948547,
            0.4283886617148281, 0.4261605974071543, 0.42130577412246095,
            0.4270694787081995, 0.42456758324159805, 0.4261548948562148,
            0.41905606435880677, 0.4162238810542892, 0.42807419690974796,
            0.42417037536502694, 0.4247596633356275, 0.4252285183577841,
            0.4091195915748805, 0.4260223820903671, 0.4280293175523842,
            0.4009469702714947, 0.3967902733869354
        ],
    },

}


# =================================================
# FUNZIONE PER PLOTTARE TUTTI I GRAFICI PER UN PEZZO
# =================================================

def plot_piece(piece_name, data):
    print(f"Plotting {piece_name} ...")

    # ----- IMAGE-LEVEL AUROC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["image"], marker="o")
    plt.title(f"{piece_name} – Image-level AUROC")
    plt.xlabel("Good Fraction")
    plt.ylabel("AUROC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUROC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_auroc"], marker="o", color="green")
    plt.title(f"{piece_name} – Pixel-level AUROC")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUROC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUPRC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_auprc"], marker="o", color="orange")
    plt.title(f"{piece_name} – Pixel-level AUPRC")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUPRC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUC-PRO -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_aucpro"], marker="o", color="red")
    plt.title(f"{piece_name} – Pixel-level AUC-PRO")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUC-PRO")
    plt.grid(True)
    plt.tight_layout()
    plt.show()


# =================================================
# ESEGUI LA PLOTTATURA PER TUTTI I PEZZI
# =================================================

for piece, data in results.items():
    plot_piece(piece, data)

