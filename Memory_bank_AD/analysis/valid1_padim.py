import matplotlib.pyplot as plt
import numpy as np

# ===========================
# DATI PER TUTTI I PEZZI – PaDiM
# ===========================

good_fractions = np.array([
    0.05, 0.10, 0.15, 0.20, 0.25,
    0.30, 0.35, 0.40, 0.45, 0.50,
    0.55, 0.60, 0.65, 0.70, 0.75,
    0.80, 0.85, 0.90, 0.95, 1.00
])

results = {

    "PZ1": {
        "image": [
            0.9894736842105263, 0.986842105263158, 0.9842105263157895, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9591059286290061, 0.9593911374681091, 0.9593651912338186,
            0.9649520411871307, 0.964764695711233, 0.9644970210620625,
            0.9639120789018958, 0.9660981530082688, 0.9658867361728479,
            0.9668806298669544, 0.9667721919555631, 0.9670660750764986,
            0.9670029826585614, 0.9672308181611183, 0.9672125023991521,
            0.9671320997377019, 0.9670503245727567, 0.9669415057584754,
            0.9670240927267659, 0.9669867791021933
        ],
        "px_auprc": [
            0.28320866690517016, 0.28204555090543193, 0.28201465113624835,
            0.2949366788122274, 0.29541748723801137, 0.29481587535798986,
            0.29345189821546, 0.2964347020130453, 0.2960887130549317,
            0.2970422811386387, 0.29687483809845544, 0.2969942447691679,
            0.2963696347923221, 0.2968232969656357, 0.2970259894788179,
            0.2969802339033014, 0.29678260753293056, 0.29642384092349416,
            0.2964026057253014, 0.29648373729526095
        ],
        "px_aucpro": [
            0.08744497888296383, 0.08767156697145892, 0.08767378538154276,
            0.08504840061249498, 0.08509348529991394, 0.08536381536786687,
            0.08524817773847868, 0.08543932182728185, 0.08539661913837149,
            0.08560711860973409, 0.08565006711058308, 0.08568433128447131,
            0.08534191072588375, 0.08548267761339703, 0.08556154841348547,
            0.08568416221297286, 0.0857596078197295, 0.08575342951289672,
            0.08561540711009409, 0.08564063643070258
        ],
    },

    "PZ2": {
        "image": [
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9930202620663958, 0.9930284646566379, 0.9930489508163167,
            0.9930096012490802, 0.9930048135558723, 0.9930047151637399,
            0.9930208350805979, 0.9930127329491083, 0.9930031145139454,
            0.9930114095766792, 0.9930082498897114, 0.9930063594577485,
            0.993007412208029, 0.9930087045811569, 0.9930141701958065,
            0.9930081784687226, 0.9930091227739901, 0.9930054524216972,
            0.9930088727830151, 0.9930066418841506
        ],
        "px_auprc": [
            0.3324311821034204, 0.3306627054525935, 0.3302498018256176,
            0.3307560802169433, 0.3310620994917191, 0.33098223401177446,
            0.33117270213095296, 0.3312069675436914, 0.3309273225351591,
            0.3311119881567339, 0.3308842319351213, 0.33091945092394287,
            0.33087188059704015, 0.3309041034666387, 0.3311802779642701,
            0.3310526627022158, 0.33098657821668187, 0.33094181098765685,
            0.33096807705240894, 0.33087460656034073
        ],
        "px_aucpro": [
            0.3381531737758394, 0.3383806149068506, 0.3395311577156407,
            0.3390790337030213, 0.33905468290704877, 0.33860946402045483,
            0.33858430708156834, 0.33848084828378744, 0.3382299207787366,
            0.3385368618887084, 0.3378960869118572, 0.337836619422268,
            0.3379925346948163, 0.3381080595917014, 0.3383565680806003,
            0.338142223664965, 0.338128895315691, 0.33812236125243555,
            0.33805983272494095, 0.3379379028230224
        ],
    },

    "PZ3": {
        "image": [
            0.9791666666666666, 0.9791666666666666, 0.9791666666666666,
            0.9791666666666666, 0.9791666666666666, 0.9874999999999999,
            0.9874999999999999, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9782945433785482, 0.9784199188951728, 0.9778563588525,
            0.9777710437839487, 0.9777608538636489, 0.9776794841269211,
            0.9777541769295177, 0.9782970300468367, 0.9784000715764101,
            0.9783982468613454, 0.9783826972863594, 0.9783877391340952,
            0.9783447881320427, 0.9783843697972463, 0.9783610610624446,
            0.9783006566800768, 0.9782757972025503, 0.9782901155045368,
            0.978300820499583, 0.9783163011537411
        ],
        "px_auprc": [
            0.3460907450119339, 0.3467584873294068, 0.3355639579718383,
            0.32867724422479916, 0.32809658752798915, 0.3252066432122274,
            0.32573996807398675, 0.32646167029896267, 0.3267833762666736,
            0.3269197413753036, 0.3272269212641779, 0.3265885002389075,
            0.3260539282389744, 0.32635487548785835, 0.32632266798227305,
            0.3262322840101411, 0.3264825672968593, 0.3266964063648802,
            0.3264970153913, 0.32678556561339944
        ],
        "px_aucpro": [
            0.2991728937222984, 0.3003193237188753, 0.29892462749473403,
            0.30170924130788995, 0.3016659397388433, 0.30053106559534276,
            0.30034095217869167, 0.2996927448993001, 0.29974938376392024,
            0.29953188667002584, 0.2995092620562136, 0.2982086871367637,
            0.29762551024944456, 0.2977598207575747, 0.29767840591831235,
            0.29757732681172827, 0.2976450953692609, 0.2979290578812319,
            0.2975699020641898, 0.2975666159751821
        ],
    },

    "PZ4": {
        "image": [
            0.9380952380952381, 0.9785714285714286, 0.9833333333333333,
            0.9880952380952381, 1.0, 1.0,
            0.9976190476190476, 0.9976190476190476, 0.9976190476190476,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9703131896197019, 0.9814481951450862, 0.9841507610369584,
            0.983556298824438, 0.9836117902942778, 0.9829644919968406,
            0.9831627918875535, 0.9830648021088454, 0.9831745033528735,
            0.9843839440909027, 0.9846192955178972, 0.9844483275867836,
            0.9841825927891716, 0.984235299478315, 0.9842694307350807,
            0.984609401696452, 0.9846151021653821, 0.9844687232946245,
            0.9846626368309913, 0.9846060567233221
        ],
        "px_auprc": [
            0.0962663227542501, 0.16062209044387565, 0.1799546687668102,
            0.17882802106226614, 0.17157198316189182, 0.16542795077757091,
            0.16570974976512853, 0.16490464600238647, 0.1680384588915107,
            0.17442827587520482, 0.17384391058193585, 0.17260468877857704,
            0.17079947053766412, 0.16879501050121004, 0.16783792484748683,
            0.1699303226132186, 0.1671104024200717, 0.1653451765084546,
            0.16739906710235908, 0.1662356878132434
        ],
        "px_aucpro": [
            0.16058780756730998, 0.26198779391387406, 0.3061562322391671,
            0.3092061682490086, 0.29979661354859277, 0.29382944055474236,
            0.29298504636761585, 0.29318321330758473, 0.29023350592071784,
            0.3079007386603064, 0.30880658018745594, 0.307005917354412,
            0.30365254417409354, 0.3025939050488878, 0.3022824013787162,
            0.3133728883894759, 0.3120217258298077, 0.31037540477038517,
            0.31333131759446203, 0.3119949374138693
        ],
    },

    "PZ5": {
        "image": [
            0.8809523809523809, 0.9785714285714286, 0.9952380952380953,
            0.9952380952380953, 0.9952380952380953, 1.0,
            1.0, 1.0, 1.0, 0.9976190476190476,
            0.9976190476190476, 0.9952380952380953, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9887247454532969, 0.9908042408464854, 0.9906281710199064,
            0.9904771016795231, 0.9908445885657815, 0.9909491234500206,
            0.9907678692842911, 0.9906964495210075, 0.9906674633491092,
            0.9907115340210411, 0.9907180441173777, 0.9906555497557951,
            0.9905883031297601, 0.9906282543812359, 0.9906287362164069,
            0.9906266726891662, 0.9906316015949383, 0.9906991051588677,
            0.9906973278239988, 0.9906188474787009
        ],
        "px_auprc": [
            0.1271860778522705, 0.13794428464356423, 0.12511563187592595,
            0.1237275465594552, 0.12799937539820608, 0.12778740925910254,
            0.1269595965048737, 0.1267614322837219, 0.1264693410723022,
            0.12686378008981575, 0.12742322560403227, 0.1270886445063868,
            0.126991381409064, 0.12764335228329043, 0.12801642310240743,
            0.12816299843776732, 0.12831940663799002, 0.12820153941279908,
            0.12833425345463476, 0.12787406739119944
        ],
        "px_aucpro": [
            0.3063580563160755, 0.3262344498862727, 0.3185416707844743,
            0.3166295663836612, 0.32362107265917894, 0.3225020837531523,
            0.3210229494151625, 0.3205172144687826, 0.3199793259697933,
            0.3204991595800982, 0.3213556261698306, 0.3206673953620999,
            0.32052417004632006, 0.3212083010119231, 0.32159699945169246,
            0.32176360939843635, 0.32180551530195395, 0.3221013894723502,
            0.32219802744073056, 0.32165753252378476
        ],
    },

}


# =================================================
# FUNZIONE PER PLOTTARE TUTTI I GRAFICI PER UN PEZZO
# =================================================

def plot_piece(piece_name, data):
    print(f"Plotting {piece_name} ...")

    # ----- IMAGE-LEVEL AUROC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["image"], marker="o")
    plt.title(f"{piece_name} – Image-level AUROC (PaDiM)")
    plt.xlabel("Good Fraction")
    plt.ylabel("AUROC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUROC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_auroc"], marker="o", color="green")
    plt.title(f"{piece_name} – Pixel-level AUROC (PaDiM)")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUROC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUPRC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_auprc"], marker="o", color="orange")
    plt.title(f"{piece_name} – Pixel-level AUPRC (PaDiM)")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUPRC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUC-PRO -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_aucpro"], marker="o", color="red")
    plt.title(f"{piece_name} – Pixel-level AUC-PRO (PaDiM)")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUC-PRO")
    plt.grid(True)
    plt.tight_layout()
    plt.show()


# =================================================
# ESEGUI LA PLOTTATURA PER TUTTI I PEZZI
# =================================================

for piece, data in results.items():
    plot_piece(piece, data)
