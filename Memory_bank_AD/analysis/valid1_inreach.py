import matplotlib.pyplot as plt
import numpy as np

# ===========================
# DATI PER TUTTI I PEZZI
# ===========================

good_fractions = np.array([
    0.05, 0.10, 0.15, 0.20, 0.25,
    0.30, 0.35, 0.40, 0.45, 0.50,
    0.55, 0.60, 0.65, 0.70, 0.75,
    0.80, 0.85, 0.90, 0.95, 1.00
])

results = {

    "PZ1": {
        "image": [
            0.908, 0.992, 0.982, 0.997, 1.000,
            0.995, 1.000, 1.000, 0.992, 1.000,
            1.000, 1.000, 1.000, 1.000, 1.000,
            1.000, 1.000, 1.000, 1.000, 1.000,
        ],
        "px_auroc": [
            0.9464, 0.9552, 0.9545, 0.9562, 0.9561,
            0.9559, 0.9559, 0.9569, 0.9560, 0.9569,
            0.9570, 0.9571, 0.9568, 0.9569, 0.9569,
            0.9574, 0.9571, 0.9573, 0.9570, 0.9571,
        ],
        "px_auprc": [
            0.2328, 0.2443, 0.2421, 0.2417, 0.2413,
            0.2428, 0.2423, 0.2435, 0.2416, 0.2419,
            0.2412, 0.2435, 0.2429, 0.2405, 0.2412,
            0.2432, 0.2423, 0.2396, 0.2403, 0.2412,
        ],
        "px_aucpro": [
            0.0606, 0.0617, 0.0615, 0.0605, 0.0604,
            0.0609, 0.0602, 0.0606, 0.0604, 0.0601,
            0.0599, 0.0605, 0.0604, 0.0598, 0.0602,
            0.0607, 0.0606, 0.0597, 0.0599, 0.0598,
        ]
    },

    "PZ2": {
        "image": [
            0.8970588235294117, 0.9529411764705882, 1.0, 0.8735294117647059,
            0.8999999999999999, 0.9588235294117647, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0, 0.9705882352941176, 1.0, 0.973529411764706,
            1.0, 1.0
        ],
        "px_auroc": [
            0.9841638875944317, 0.9884525569934429, 0.9886780127045394,
            0.9885654832094916, 0.9883690568553274, 0.9885520799873273,
            0.9888068537516734, 0.9887609774829713, 0.9892416849431197,
            0.9889511163381876, 0.9887835138348536, 0.9888486806709762,
            0.9888861044285162, 0.9888607814321045, 0.9888633651625637,
            0.9886808524156692, 0.9889203062202663, 0.9888042404230113,
            0.988994523311139, 0.9888941197969899
        ],
        "px_auprc": [
            0.20998825449881753, 0.21149741134556035, 0.21147418773181836,
            0.21207393607789876, 0.20933143768488635, 0.21126148686166718,
            0.2094384836150257, 0.21115874523289463, 0.21156662085456684,
            0.21321357563489088, 0.20980135406728795, 0.20953726574097717,
            0.21014143070032476, 0.21108867117819813, 0.2094881054866318,
            0.21014505697410235, 0.2114263881990595, 0.20981649692792181,
            0.21104808727631247, 0.2116349520933388
        ],
        "px_aucpro": [
            0.2742691863488489, 0.2617731155736744, 0.2743792910125883,
            0.27382847344798394, 0.27287243305201797, 0.272271744496494,
            0.2745098085510884, 0.2738459578368053, 0.2696112816924256,
            0.27166145373137673, 0.2725422465442567, 0.27306924352503675,
            0.2728769845487228, 0.27329775060762884, 0.2730469730839246,
            0.2722022663093154, 0.2710362320641046, 0.2738560097928563,
            0.27179803599771457, 0.2719774775172088
        ]
    },

    "PZ3": {
        "image": [
            1.0, 0.9875, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 1.0, 1.0, 1.0
        ],
        "px_auroc": [
            0.9616999320975425, 0.9554823649474671, 0.9689983321049772,
            0.9707480505129821, 0.971371966572952, 0.9708877184260372,
            0.9709146104414325, 0.9708538376459122, 0.9710734663467294,
            0.97126522789883, 0.9710720109605485, 0.9716299277128206,
            0.97112013808546, 0.9713369808184494, 0.9721796611289092,
            0.9714410427618461, 0.9714470539111408, 0.9712065207761917,
            0.9717402931888701, 0.9715702603977399
        ],
        "px_auprc": [
            0.25751324646139556, 0.2634259057132716, 0.282270761850144,
            0.2812302655199745, 0.27873125667512694, 0.27806778160933276,
            0.2754217043616516, 0.27567769931549757, 0.27414461082745845,
            0.275728376056199, 0.2755846733727614, 0.27653106641474257,
            0.27520333993725, 0.2732465085023467, 0.2732341908478533,
            0.27229452909408264, 0.270887143268118, 0.27369292437685055,
            0.27247188775900877, 0.2711432999653236
        ],
        "px_aucpro": [
            0.17121043618862064, 0.1948724647271572, 0.19610023425250983,
            0.19616891569155193, 0.19414249152545332, 0.1939756470874524,
            0.1908715982045907, 0.1929101927513219, 0.1960085582174391,
            0.19068183810265316, 0.18928985585620828, 0.19079064859600514,
            0.19004751970942535, 0.19174948059758973, 0.19168906076695164,
            0.19191521318560467, 0.1915197215562739, 0.1887817162446846,
            0.19068568815526954, 0.19153331910550503
        ]
    },

    "PZ4": {
        "image": [
            0.7666666666666667, 0.8785714285714286, 0.8452380952380951,
            0.9642857142857143, 0.9833333333333334, 0.9976190476190476,
            0.9642857142857142, 1.0, 1.0, 0.9547619047619047,
            1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 0.9738095238095238, 1.0, 0.9952380952380953, 0.9166666666666666
        ],
        "px_auroc": [0.9635213525590705, 0.9824826968847399, 0.9835396994351747, 0.9852125218356067, 
                     0.9863033378924766, 0.9862905389091523, 0.9864053129602235, 0.9872378030373706,
                     0.9872144639816198, 0.9866043598861636, 0.9871153672559443, 0.9872376192181044,
                     0.9875221816326736, 0.9873934200160716, 0.9874407917471499, 0.9873456698401498,
                     0.9874147070485848, 0.9876638369697913, 0.9874970887070793, 0.9868983156164148],
        "px_auprc": [0.18102345106087103, 0.21953012869050353, 0.2192760653149158, 0.22309112957552235, 
                     0.2179089572069204, 0.21667124795250656, 0.21732004107851613, 0.2179428112674226,
                     0.21713695646789938, 0.2157463506721987, 0.22053457313310393, 0.21564993292845383,
                     0.21554798919475388, 0.21657675599647136, 0.21730378973140785, 0.21848870353116487,
                     0.2180047376738357, 0.21750491342218145, 0.21690238837970244, 0.21738845927173878],
        "px_aucpro": [0.28457370813467237, 0.3808376578900595, 0.3802124249622595, 0.3878235687340558, 
                      0.389596958901286, 0.3887411959473446, 0.39741161530825003, 0.39508906704221775,
                      0.39415663866573236, 0.39322936276570486, 0.3891010134503179, 0.39177786452662683,
                      0.3923019630427047, 0.3906383328282678, 0.3938142182784793, 0.39496134318800563,
                      0.3931495702875401, 0.39380319902562333, 0.39360559372661125, 0.3941083367977591]
    },

    "PZ5": {
        "image": [
            0.7761904761904762, 0.8857142857142857, 0.9547619047619047, 0.9809523809523809,
            0.9952380952380953, 1.0, 1.0, 1.0, 1.0, 1.0,
            1.0, 1.0, 0.9976190476190476, 1.0, 1.0, 0.9976190476190476,
            1.0, 0.9976190476190476, 1.0, 1.0
        ],
        "px_auroc": [
            0.9701118932322536, 0.9857945179370871, 0.9868238330970355, 0.9877221591340598,
            0.9877405954170664, 0.9881113711752412, 0.9880133758089843, 0.9880122352744314,
            0.9880884608517914, 0.987911425181681, 0.9878673490489132, 0.9881190166796319,
            0.9879231088069423, 0.9878520413790103, 0.9878656026402057, 0.9880498977113303,
            0.9881712666247879, 0.9880135842680308, 0.9881429007592528, 0.9881314196864195
        ],
        "px_auprc": [
            0.06982684753177973, 0.10338972361622431, 0.10328788138646548, 0.104541480351691,
            0.10489985667814795, 0.10574167035844438, 0.10510898286921244, 0.10494419544103502,
            0.10491201486894242, 0.10480395256574347, 0.10486221345622608, 0.10486181586036908,
            0.10476485123051316, 0.10417735807314837, 0.10471736623578581, 0.10535319554941386,
            0.10524660731552121, 0.10443334445951749, 0.10551094139544297, 0.10476291464320046
        ],
        "px_aucpro": [
            0.21336586443092656, 0.26910247084833516, 0.265818190243677, 0.26803470791831585,
            0.2675769280861794, 0.26835536322988474, 0.26695917302770966, 0.2663493374104287,
            0.26559105926040927, 0.2676628536511437, 0.2658780759085888, 0.2662354850553026,
            0.26603045815112647, 0.2650672520009128, 0.2650526379630122, 0.26656540980605165,
            0.2663570379195067, 0.26502153097773357, 0.2660633697348313, 0.2641916584619647
        ]
    },

}


# =================================================
# FUNZIONE PER PLOTTARE TUTTI I GRAFICI PER UN PEZZO
# =================================================

def plot_piece(piece_name, data):
    print(f"Plotting {piece_name} ...")

    # ----- IMAGE-LEVEL AUROC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["image"], marker="o")
    plt.title(f"{piece_name} – Image-level AUROC")
    plt.xlabel("Good Fraction")
    plt.ylabel("AUROC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUROC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_auroc"], marker="o", color="green")
    plt.title(f"{piece_name} – Pixel-level AUROC")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUROC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUPRC -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_auprc"], marker="o", color="orange")
    plt.title(f"{piece_name} – Pixel-level AUPRC")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUPRC")
    plt.grid(True)
    plt.tight_layout()
    plt.show()

    # ----- PIXEL-LEVEL AUC-PRO -----
    plt.figure(figsize=(8, 5))
    plt.plot(good_fractions, data["px_aucpro"], marker="o", color="red")
    plt.title(f"{piece_name} – Pixel-level AUC-PRO")
    plt.xlabel("Good Fraction")
    plt.ylabel("Pixel AUC-PRO")
    plt.grid(True)
    plt.tight_layout()
    plt.show()


# =================================================
# ESEGUI LA PLOTTATURA PER TUTTI I PEZZI
# =================================================

for piece, data in results.items():
    plot_piece(piece, data)

